
curl -X POST https://api.elastic.io/v2/flows \
    -u email:uid \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json' \
    -d '{"data":{"attributes":{"default_mapper_type":"jsonata","type":"ordinary","created_at":"2019-09-24T08:04:50.233Z","last_modified":"2019-09-24T10:15:01.161Z","name":"Copy of draft: SIGNL4 Alerting","description":null,"cron":null,"graph":{"nodes":[{"name":"","description":"","command":"elasticio/csv:read@latest","fields":{"reader":{"header":"Machine;Location;Status;Temperature","separator":";","startRow":"1","columns":[{"title":"Machine","property":"machine"},{"title":"Location","property":"location"},{"title":"Status","property":"status"},{"title":"Temperature","property":"temperature","type":"number","format":"dec_point"}]},"url":"http://ronlab.epizy.com/csv/data.csv"},"id":"step_1","selected_data_samples":["5d8a01cada24b93b4a976aa3"]},{"name":"2. REST API: SIGNL4","description":"Send SIGNL4 alert.\n","command":"elasticio/rest-api-component:httpRequestAction@latest","fields":{"followRedirect":"doNotFollowRedirects","reader":{"auth":{"basic":{"password":"","username":""}},"body":{"contentType":"application/json","urlencoded":[],"formData":[],"raw":"{\n\"Alert\": \"Machine alert from elastic.io\",\n\"Machine\": elasticio.\"step_1\".body.machine,\n\"X-S4-Location\": elasticio.\"step_1\".body.location,\n\"Status\": elasticio.\"step_1\".body.status,\n\"Temperature\": elasticio.\"step_1\".body.temperature\n}\n"},"headers":[{"frozen":true,"value":"\"application/json\"","key":"Content-Type"}],"url":"\"https://connect.signl4.com/webhook/<team-secret>\"","method":"POST"}},"id":"step_2","credentials_id":"5d89d58ada24b9d23697247c","selected_data_samples":["5d8a01caadb1cc65376fbdfc"]},{"name":"","description":"","command":"elasticio/filter:SimpleJSONataFilter@latest","fields":{"expression":"elasticio.\"step_1\".body.temperature > 20\n","assertion":false},"id":"step_3","selected_data_samples":["5d8a01caadb1ccc1856fbdfd"]}],"edges":[{"config":{"mapper":{},"condition":null},"source":"step_1","target":"step_3"},{"config":{"mapper":{},"condition":null},"source":"step_3","target":"step_2"}]}},"relationships":{"workspace":{"data":{"type":"workspace","id":"5d89cd64da24b91ff697176c"}}},"type":"flow"}}'
